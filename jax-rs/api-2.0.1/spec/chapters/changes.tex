\chapter{Change Log}

\section{Changes Since 2.0 Proposed Final Draft}

\begin{itemize}
\item Section \ref{message_body_reader} and \ref{message_body_writer}: Updated last logical step separating client and server runtimes.
\item Section \ref{standard_entity_providers}: New exception \code{NoContentException} to handle zero-length entities. 
\item Section \ref{exceptions_providers} and \ref{exceptions_filters_and_interceptors}: New subsections to separate client and server processing of exceptions.
\item Section \ref{configurable_types}: \Invocation\ and \InvocationBuilder\ are no longer configurable types.
\item Section \ref{filters_interceptors_client}: Updated samples based on changes to Client API.
\item Section \ref{default_validation_mode}: Updated section based on changes to Bean Validation API.
\item Section \ref{validation_and_error_reporting}: Minor re-wording of Phase 2. 
\item Section \ref{timeouts_and_callbacks}: Improved example to return a response if a timeout expires.
\item Section \ref{client_api_async}: Updated samples based on changes to Client API.
\item Section \ref{contexttypes}: Clarified server vs.~client injectable types.
\item Section \ref{configuration_injection}: New section about injection of \code{Configuration} instances.
\item Section \ref{bv_support}: New section stating that support for resource validation is required only in a product that supports Bean Validation.
\end{itemize}

\section{Changes Since 2.0 Public Review Draft}

\begin{itemize}
\item In Javadocs: Method \code{getSize} in class \code{MessageBodyWriter} is deprecated.
\item Chapter \ref{resources} and \ref{providers}: Replaced \WebAppExc\ by corresponding subclass depending on HTTP status code.
\item Section \ref{resource_field}: New step for \code{ParamConverter}. 
\item Section \ref{standard_entity_providers}: Special case for zero-length entities and primitive types.
\item Chapter \ref{client_api}: Updated samples and text related to the configuration of Client API types. Method \code{configuration} has been removed in favor of the \code{Configurable} interface.
\item Chapter \ref{client_api}: \code{ClientFactory} renamed to \code{ClientBuilder}.
\item Chapter \ref{client_api}: Dropped support for \code{@Uri} annotation.
\item Section \ref{entity_interceptors}: New paragraph clarifying that entity interceptors are not called if a \code{readFrom} or \code{writeTo} method is called directly from application code.
\item Section \ref{entity_interceptors}: Improved \code{GzipInterceptor} sample.
\item Section \ref{Name_Binding}: Clarified name binding with multiple annotations. Made semantics compatible with CDI interceptor binding. Name binding with \code{Application} subclasses.
\item Section \ref{priorities}: Annotation \code{@BindingPriority} replaced by common annotation \code{@Priority}.
\item Section \ref{exceptions_filters_and_interceptors}: Clarified processing of a response mapped from an exception.
\item Section \ref{server_api}: Updated samples in this section. New citation for JSR 236.
\item Section \ref{timeouts_and_callbacks}: Improved example.
\item Section \ref{client_api_async}: Fixed signature of method \code{failed} in samples.
\item Section \ref{default_validation_mode}: New section about default validation and \code{@ValidateExecutable}.
\item Section \ref{validation_and_error_reporting}: Restored validation phases.
\item Section \ref{jsonp}: New section about integration with JSON-P.

\end{itemize}

\section{Changes Since 2.0 Early Draft (Third Edition)}

\begin{itemize}
\item Chapter ``Validation'': Removed from PR. JAX-RS 2.0 will defer to CDI for Bean Validation. Only those resource classes that are CDI beans would be validated.
\item Section \ref{method_exc}: Clarified that the steps must be followed in order and that throwables are propagated to the underlying container only if they cannot be mapped.
\item Section \ref{resource_method}: Added \code{@OPTIONS} to list.
\item Section \ref{resource_method_return}: New note about anonymous inner classes.
\item Section \ref{request_matching}: Allow multiple root resource classes to share same URI in algorithm. Note changes in output and input of steps 1 and 2, respectively.
\item Section \ref{message_body_writer}: Throw new exception  \code{InternalServerErrorException}.
\item Section \ref{entity_providers}: Removed steps that required the use of the JavaBeans Activation Framework\cite{jaf} to map objects to representations and vice-versa. The EG deemed this feature to be confusing and not portable across implementations.
\item Section \ref{standard_entity_providers}: Support for pre-packaged readers and writers for Java types \code{java.lang.Boolean}, \code{java.lang.Character}, \code{java.lang.Number} and media type \code{text/plain}.
\item Section \ref{standard_entity_providers}: Detailed behavior for readers and zero-length request entities.
\item Section \ref{dynamic_binding}: \code{DynamicBinder} replaced by \code{DynamicFeature}.
\item Section \ref{exceptions_filters_and_interceptors}: Clarified processing of responses mapped using exception mappers. 
%\item Section \ref{annotations_and_validators}: Explained notion of processing groups and use of \code{Default} group.
\item Chapter \ref{asynchronous_processing}: Updated sections related to the Server API. \code{@Suspended} annotation, timeouts and callbacks.
\item Section \ref{timeouts_and_callbacks}: Throw new exception \code{ServiceUnavailableException}.
\item Section \ref{resource_context}: New section for \code{ResourceContext}.
\item Section \ref{ejbs}: Clarified location of annotations in accordance to the JAX-RS annotation inheritance rules.
\item Chapter \ref{filters_and_interceptors}: Replaced \code{@PostMatching} by \code{@PreMatching}. Post-matching is now the default.
\item Appendix \ref{annotation_table}: Edited section on JAX-RS 2.0 annotations.
\end{itemize}

\section{Changes Since 2.0 Early Draft (Second Edition)}

\begin{itemize}
\item Section \ref{uritemplates}: New example showing a scenario in which a \code{@PathParam} is not be available for injection. 
\item Section \ref{request_matching}: Formalization of certain parts of the matching algorithm that were vague. Defined formal ordering between media types and highlighted situations in which implementations should report a warning if the matching is ambiguous. 
\item Section \ref{request_matching}: New sample showing the resource matching algorithm in action.
\item Section \ref{template_to_regex}: New footnote about syntax of regular expression.
\item Chapter \ref{providers}: The annotation \Provider\ is now only required for automatic discovery of providers (typically via class scanning). It is no longer required for a provider that is manually registered in classes such as \code{Application} or \code{Configuration}.
\item Section \ref{automatic_discovery}: New section about automatic discovery of provider classes. Only those annotated with \Provider\ must be discovered automatically.
\item Chapter \ref{client_api}: Features are now providers and can be registered as such. A feature can no longer be disabled.
\item Chapter \ref{client_api}: Class \code{Target} renamed to \WebTarget. Removed text describing how to use a builder factory class (no longer supported). A few other minor updates and typos fixed.
\item Chapter \ref{filters_and_interceptors}: Extension points for filters revised. New filter interfaces \ClientRequestFilter\ and \ClientResponseFilter\ in Client API and new filter interfaces \ContainerRequestFilter\ and \ContainerResponseFilter\ in Server API. Corresponding context classes also updated in chapter. A \ContainerRequestFilter\ is executed before resource matching unless annotated with \PostMatching. It is no longer possible to share a filter implementation between the Client and Server APIs; entity interceptors are still shareable.
\item Chapter \ref{filters_and_interceptors}: Section on the relationship between filters and entity interceptors (including diagram) dropped.
\item Section \ref{global_binding}: Clarified global binding in relation to the new semantics of \Provider\ for automatic discovery.
\item Section \ref{dynamic_binding}: The \code{DynamicBinding} interface, intended to be implemented by filters and entity interceptors, is replaced by \code{DynamicBinder}. A dynamic binder is a new type of provider that binds filters and entity interceptors with resource methods. 
\item Chapter ``Validation'': Use media type names instead of Java constants for clarity. More descriptive names for constraint annotations. Changed inheritance rules for constraint annotations to follow those defined in \cite{bv11}. New note about \code{@Valid} support for return values. Fixed phase number typo.
\item Section \ref{timeouts_and_callbacks}: New sentence about calling \code{suspend} more than once or in a method annotated with \code{@Suspend}.
\item Section \ref{async_ejbs}: New section about EJB resource classes with methods annotated with \code{@Asynchronous}.
\item Chapter \ref{environment}: Re-structured chapter with sub-sections for each of the EE technologies with which \jaxrs\ integrates. New examples added.
\end{itemize}

\section{Changes Since 2.0 Early Draft}

\begin{itemize}
\item Section \ref{expert_group}: Updated 2.0 expert group member list.
\item Section \ref{acks}: Updated acknowledgements for 2.0 version.
\item Section \ref{exceptions_providers}: New section that describes exception handling for all providers. Related changes to reference this new section.
\item Section \ref{exceptions_filters_and_interceptors}: New section for filter and interceptor exceptions. Related changes to reference this new section.
\item Section \ref{request_matching}: Updated step 2a so that it only goes to step 3 when $M \neq \{\}$. 
\item Section \ref{request_matching}: New sentence about the use of a server quality parameter (qs-value) during request matching.
\item Chapter \ref{filters_and_interceptors}: New extension point for pre-match filters that are executed before resource matching.
\item Chapter \ref{filters_and_interceptors}: Filter methods no longer return a next action; the execution of a request filter chain is stopped by setting a response in the associated context.
\item Chapter \ref{filters_and_interceptors}: Handlers renamed to entity interceptors for clarity (in this log included).
\item Section \ref{global_binding}: Global binding is now the default for filters and entity interceptors. The annotation \code{@GlobalBinding} has been dropped.
\item Section \ref{priorities}: Clarified reverse ordering of the response filter chain based on binding priorities.
\item Appendix C: Removed from this version after changes to Chapter \ref{filters_and_interceptors}.
\item Chapter ``Validation'': Moved to an instantiate-then-validate strategy in which validation of constructor parameters and setters is no longer supported. Simplified validation process to better align with Bean Validation 1.1 \cite{bv11}. In particular, validation of resource classes, fields and property getters are all carried out in a single step.

\end{itemize}

\section{Changes Since 1.1 Release}

\begin{itemize}
\item Section \ref{status}: Updated URLs to JSR pages, etc.
\item Section \ref{non_goals}: Removed Client APIs as non-goal.
\item Section \ref{terminology}: Added new terminology.
\item Section \ref{expert_group}: List 2.0 expert group members.
\item Section \ref{acks}: acknowledgements for 2.0 version.
\item Chapter \ref{applications}: Somewhat generic section on validation removed to avoid confusion with the type of validation defined in Chapter ``Validation''.
\item Section \ref{servlet}: Clarified used of Servlet 3 framework pluggability. Added sample web.xml files and a table summarizing all cases.
\item Section \ref{entity_parameters}: Clarified notion of entity parameter as a parameter not annotated with any JAX-RS annotation.
\item Section \ref{declaring_method_capabilities}: Explained use of quality factor q. Introduced server-side quality factor qs and included example.
\item Section \ref{annotationinheritance}: Added sentence about conflicting annotations and recommendation to repeat annotations for consistency with other Java EE specifications.
\item Section \ref{reqpreproc}: Highlighted input and output for each step in algorithm. Minor edits to simplify presentation.
\item Section \ref{determine_response_type}: Updated algorithm to support server-side quality factor qs.
\item Chapter \ref{client_api}: New chapter Client API.
\item Chapter \ref{filters_and_interceptors}: New chapter Filters and Interceptors.
\item Chapter ``Validation'': New chapter Validation.
\item Chapter \ref{asynchronous_processing}: New chapter Asynchronous Processing.
\item Appendix \ref{annotation_table}: New section for 2.0 annotations.
\item Appendix C: New appendix describing filter and interceptor extension points.
\end{itemize}

\section{Changes Since 1.0 Release}

\begin{itemize}
\item Section \ref{servlet}: New requirements for Servlet 3 containers.
\item Section \ref{javaee}: Requirements for Java EE 6 containers.
\item Section \ref{standard_entity_providers}: Requirements on standard entity providers when presented with an empty message entity.
\item Section \ref{message_body_writer}: Add closeness of generic type as secondary sort key.
\item Section \ref{message_body_reader}: Default to application/octet-stream if a request does not contain a content-type header.
\item Section \ref{resource_field}: Add support for static fromString method.
\item Section \ref{annotationinheritance}: Clarify annotation inheritance.
\item Section \ref{security_context}: Fix typo.
\item Section \ref{servlet_container}: Additional considerations related to filters consuming request bodies.
\end{itemize}

\section{Changes Since Proposed Final Draft}

\begin{itemize}
\item Section \ref{request_matching}: Additional sort criteria so that templates with explicit regexs are sorted ahead of those with the default.
\item Sections \ref{request_matching}, \ref{determine_response_type}, \ref{declaring_provider_capabilities} and \ref{context_media_type}: Q-values not used in \Consumes\ or \Produces.
\item Section \ref{message_body_writer}: Fixed algorithm to refer to Section \ref{determine_response_type} instead of restating it. Fixed status code returned when the media type has been determined but an appropriate message body writer cannot be located.
\item Chapter \ref{runtimedelegate}: Clarify that an implementation can supply an alternate \rd\ API class.
\end{itemize}

\section{Changes Since Public Review Draft}

\begin{itemize}
\item Chapter \ref{applications}: Renamed ApplicationConfig class to Application.
\item Chapter \ref{resources}: UriBuilder reworked to always encode components.
\item Sections \ref{resource_class_constructor} and \ref{provider_class_constructor}: Added requirement to warn when choice of constructor is ambiguous.
\item Section \ref{resource_field}: \code{FormParam} no longer required to be supported on fields or properties.
\item Section \ref{resource_method_return}: Added text describing how to determine raw and generic types from method return type and returned instance.
\item Section \ref{uritemplates}: Template parameters can specify the regular expression that forms their capturing group.
\item Section \ref{reqpreproc}: Make pre-processed URIs available rather than original request URI. Added URI normalization.
\item Section \ref{reqpreproc}: Removed URI-based content negotiation.
\item Section \ref{request_matching}: Reorganized the request matching algorithm to remove redundancy and improve readability, no functional change.
\item Section \ref{template_to_regex}: Changes to regular expressions to eliminate edge cases.
\item Section \ref{entity_providers}: Added requirement to use JavaBean Activation Framework when no entity provider can be found.
\item Section \ref{standard_entity_providers}: Require standard JAXB entity providers to use application-supplied JAXB contexts in preference to their own.
\item Section \ref{contextprovider}: Added support for specifying media type capabilities of context providers.
\item Section \ref{contexttypes}: Removed \code{ContextResolver} from list of injectable resources.
\item Section \ref{providercontext}: Changed name to Providers, removed entity provider-specific text to reflect more generic capabilities.
\item Chapter \ref{headersupport}: New appendix describing where particular HTTP headers are supported.
\end{itemize}
